<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${pageTitle}"></title>
  <th:block th:replace="~{admin/layouts/_header::link-css}"></th:block>
</head>
<body>
<div th:replace="~{admin/layouts/_header :: header}"></div>
<div class="content-wrapper">
  <!-- Main content -->
  <section class="content">
    <!-- Default box -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Chi tiết liên hệ</h3>
      </div>
      <input type="hidden" name="id" th:value="${id}"></input>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label>Tên khách hàng</label>
              <p class="form-control" id="name"></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Email</label>
              <p class="form-control" id="email"></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Số điện thoại</label>
              <p class="form-control" id="phoneNumber"></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Ngày gửi</label>
              <p class="form-control" id="createdDate"></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Tin nhắn</label>
              <p class="form-control" style="height: auto; width: auto;" id="message"></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="flex-grow-1"></div>
            <div style="position: absolute; bottom: 0; margin-left:20px; margin-bottom:20px">
              <a href="" target="_blank" class="btn btn-primary" id="replyButton">Trả lời</a>
              <a href="/admin/contact" class="btn btn-danger">Quay lại</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /.card -->
  </section>
  <!-- /.content -->
</div>
<div th:replace="~{admin/layouts/_footer :: footer}"></div>
<script>
    $(document).ready(function () {
        var id = $("input[name='id']").val();

        // Gọi API để lấy dữ liệu từ server
        $.get("http://localhost:2009/api/contacts/" + id, function (data) {
            // Cập nhật giá trị trong view
            $("#name").text(data.name);
            $("#email").text(data.email);
            $("#phoneNumber").text(data.phoneNumber);
            $("#createdDate").text(formatDate(data.createdDate));
            $("#message").text(data.message);
            $("#replyButton").attr("href", "https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=" + data.email);
        });
    });

    function formatDate(dateString) {
        var date = new Date(dateString);
        var day = date.getDate();
        var month = date.getMonth() + 1;
        var year = date.getFullYear();
        var hours = date.getHours();
        var minutes = date.getMinutes();

        return (day < 10 ? "0" + day : day) + "/" +
               (month < 10 ? "0" + month : month) + "/" +
               year + " " +
               (hours < 10 ? "0" + hours : hours) + ":" +
               (minutes < 10 ? "0" + minutes : minutes);
    }

</script>
</body>
</html>