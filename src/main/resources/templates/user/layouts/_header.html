<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:fragment="link-css" rel="stylesheet" th:href="@{/Content/users/css/bootstrap.min.css}" />
    <link th:fragment="link-css" rel="stylesheet" th:href="@{/Content/users/css/style.css}" />
    <link th:fragment="link-css" rel="stylesheet" th:href="@{/Content/users/css/responsive.css}" />
    <link th:fragment="link-css" rel="stylesheet" th:href="@{/Content/users/css/colors1.css}" />
    <link th:fragment="link-css" rel="stylesheet" th:href="@{/Content/users/css/custom.css}" />
    <link th:fragment="link-css" rel="stylesheet" th:href="@{/Content/users/css/animate.css}" />
    <link th:fragment="link-css" th:href="@{/Content/users/revolution/css/layers.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/revolution/css/navigation.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/revolution/css/settings.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/custom.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/css/account.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/banner/fonts/iconic/css/material-design-iconic-font.min.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/banner/vendor/animate/animate.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/banner/vendor/slick/slick.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/banner/css/main.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/banner/css/util.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/css/checkoutItem.css}" rel="stylesheet" />
    <link th:fragment="link-css" th:href="@{/Content/users/css/mess.css}" rel="stylesheet" />
</head>
<body class="hold-transition sidebar-mini">
<header th:fragment="header">
    <div class="bg_load">
    </div>
    <header id="default_header" class="header_style_1">
        <div class="header_top container-menu-desktop">
            <div class="container" style="padding-left:0px;padding-right:0px">
                <div class="row">
                    <div class="col-md-8">
                        <div class="full">
                            <div class="topbar-left">
                                <ul class="list-inline">
                                    <li>
                                        <span class="topbar-label"><i class="fa  fa-home"></i></span>
                                    </li>
                                    <li>
                                        <span class="topbar-label"><i class="fa fa-envelope-o"></i></span>
                                        <span class="topbar-hightlight">
                                    </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="float-right">
                            <div class="social_icon" style="padding-top:12px">
                                <ul class="list-inline">
                                    <li><a class="fa fa-facebook" href="https://www.facebook.com/" title="Facebook" target="_blank"></a></li>
                                    <li><a class="fa fa-google-plus" href="https://plus.google.com/" title="Google+" target="_blank"></a></li>
                                    <li><a class="fa fa-twitter" href="https://twitter.com" title="Twitter" target="_blank"></a></li>
                                    <li><a class="fa fa-linkedin" href="https://www.linkedin.com" title="LinkedIn" target="_blank"></a></li>
                                    <li><a class="fa fa-instagram" href="https://www.instagram.com" title="Instagram" target="_blank"></a></li>
                                </ul>
                            </div>
                            <div class="account" id="account" style="width: 200px; margin: 0px auto">
                                <a href="#">
                                    <h4 id="username"></h4>  Tài khoản
                                    <i class="fa fa-angle-down"></i>
                                </a>
                                <ul class="account_selection" id="account-selection">
                                    <li><a href="/account/login">Đăng nhập</a></li>
                                    <li><a href="/account/register">Đăng ký</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="header_bottom ">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12">
                        <div class="logo">
                            <a href="/home/index">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12">
                        <div class="menu_side">
                            <div id="navbar_menu">
                                <ul class="first-ul">
                                    <li>
                                        <a th:class="${currentPath == '/home/index'} ? 'active' : ''" href="/home/index">Trang Chủ</a>
                                    </li>
                                    <li>
                                        <a th:class="${currentPath == '/news/index'} ? 'active' : ''" href="/news/index">Tin tức</a>
                                    </li>
                                    <li>
                                        <a th:class="${currentPath == '/home/sale'} ? 'active' : ''" href="/home/sale">Khuyến Mãi</a>
                                    </li>
                                    <li>
                                        <a th:class="${currentPath == '/products/index'} ? 'active' : ''" href="/products/index">Sản Phẩm</a>
                                    </li>
                                    <li>
                                        <a th:class="${currentPath == '/home/contact'} ? 'active' : ''" href="/home/contact">Liên Hệ</a>
                                    </li>
                                    <li class="js-show-cart">
                                        <a>
                                            <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                            <span id="checkout_items" class="checkout_items">0</span>
                                        </a>
                                    </li>
                                </ul>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="wrap-header-cart js-panel-cart">
    </div>

    <div class="wrap-header-mess js-panel-mess" >
        <a href="#" class="chat-logo js-show-mess">
            <img src="~/Content/users/images/messenger-logo-png-6.png" alt="Tin nhắn" class="logo-icon">
            <div class="chat-view">
                <!-- Nội dung view chat -->
            </div>
        </a>
    </div>



</header>
<div th:fragment="content"></div>
</body>
</html>
<script>
    function logout() {
        // Xóa token khỏi localStorage
        localStorage.removeItem("accessToken");

        // Hoặc thực hiện các thao tác khác để đăng xuất người dùng

        // Chuyển hướng đến trang đăng nhập hoặc trang chính
        window.location.href = "/login"; // Thay đổi "/login" thành URL của trang đăng nhập hoặc trang chính

        // Hoặc làm mới trang hiện tại
        // window.location.reload();
    }
</script>
<script>
        // Lấy giá trị token từ localStorage
        var accessToken = localStorage.getItem("accessToken");

        // Gọi API hoặc sử dụng hàm giải mã token đã được định nghĩa để lấy thông tin username
        var decodedToken = parseJwt(accessToken);
        var username = decodedToken.sub; // Thay "sub" bằng trường chứa username trong token của bạn

        // Hiển thị username trong thẻ h1 có id "username"
        var usernameElement = document.getElementById("username");
        usernameElement.textContent = "Xin chào, " + username;

        // Hàm giải mã token
        function parseJwt(token) {
            var base64Url = token.split(".")[1];
            var base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
            var jsonPayload = decodeURIComponent(atob(base64).split("").map(function (c) {
                return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(""));

            return JSON.parse(jsonPayload);
        }
    </script>
